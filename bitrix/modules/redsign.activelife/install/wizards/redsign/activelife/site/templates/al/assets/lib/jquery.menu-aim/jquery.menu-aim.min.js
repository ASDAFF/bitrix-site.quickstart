!function(t){"use strict";var e=function(t,e){this.$menu=this.activeRow=this.mouseLocs=this.lastDelayLoc=this.timeoutId=this.options=null,this.init(t,e)};e.DEFAULTS={rowSelector:"> li",submenuSelector:"*",submenuDirection:"right",tolerance:75,enter:t.noop,exit:t.noop,activate:t.noop,deactivate:t.noop,exitMenu:t.noop},e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.mousemoveDocument=function(t){this.mouseLocs.push({x:t.pageX,y:t.pageY}),this.mouseLocs.length>this.MOUSE_LOCS_TRACKED&&this.mouseLocs.shift()},e.prototype.mouseleaveMenu=function(){this.timeoutId&&clearTimeout(this.timeoutId),this.options.exitMenu(this)&&(this.activeRow&&this.options.deactivate(this.activeRow),this.activeRow=null)},e.prototype.mouseenterRow=function(t){this.timeoutId&&clearTimeout(this.timeoutId),this.options.enter(t.currentTarget),this.possiblyActivate(t.currentTarget)},e.prototype.mouseleaveRow=function(t){this.options.exit(t.currentTarget)},e.prototype.clickRow=function(t){this.activate(t.currentTarget)},e.prototype.activate=function(t){t!=this.activeRow&&(this.activeRow&&this.options.deactivate(this.activeRow),this.options.activate(t),this.activeRow=t)},e.prototype.possiblyActivate=function(t){var e=this.activationDelay(),i=this;e?this.timeoutId=setTimeout(function(){i.possiblyActivate(t)},e):this.activate(t)},e.prototype.activationDelay=function(){function e(t,e){return(e.y-t.y)/(e.x-t.x)}if(!this.activeRow||!t(this.activeRow).is(this.options.submenuSelector))return 0;var i=this.$menu.offset(),o={x:i.left,y:i.top-this.options.tolerance},s={x:i.left+this.$menu.outerWidth(),y:o.y},n={x:i.left,y:i.top+this.$menu.outerHeight()+this.options.tolerance},u={x:i.left+this.$menu.outerWidth(),y:n.y},a=this.mouseLocs[this.mouseLocs.length-1],h=this.mouseLocs[0];if(!a)return 0;if(h||(h=a),h.x<i.left||h.x>u.x||h.y<i.top||h.y>u.y)return 0;if(this.lastDelayLoc&&a.x==this.lastDelayLoc.x&&a.y==this.lastDelayLoc.y)return 0;var c=s,r=u;"left"==this.options.submenuDirection?(c=n,r=o):"below"==this.options.submenuDirection?(c=u,r=n):"above"==this.options.submenuDirection&&(c=o,r=s);var m=e(a,c),l=e(a,r),p=e(h,c),y=e(h,r);return m<p&&l>y?(this.lastDelayLoc=a,this.DELAY):(this.lastDelayLoc=null,0)},e.prototype.destroy=function(){this.$menu.removeData("jquery.menu-aim"),this.$menu.off(".menu-aim").find(this.options.rowSelector).off(".menu-aim"),t(document).off(".menu-aim")},e.prototype.reset=function(t){this.timeoutId&&clearTimeout(this.timeoutId),this.activeRow&&t&&this.options.deactivate(this.activeRow),this.activeRow=null},e.prototype.init=function(e,i){this.$menu=t(e),this.activeRow=null,this.mouseLocs=[],this.lastDelayLoc=null,this.timeoutId=null,this.options=t.extend({},this.getDefaults(),i),this.MOUSE_LOCS_TRACKED=3,this.DELAY=300,this.$menu.on("mouseleave.menu-aim",t.proxy(this.mouseleaveMenu,this)).find(this.options.rowSelector).on("mouseenter.menu-aim",t.proxy(this.mouseenterRow,this)).on("mouseleave.menu-aim",t.proxy(this.mouseleaveRow,this)).on("click.menu-aim",t.proxy(this.clickRow,this)),t(document).on("mousemove.menu-aim",t.proxy(this.mousemoveDocument,this))},t.fn.menuAim=function(i){return this.each(function(){var o=t(this),s=o.data("jquery.menu-aim"),n="object"==typeof i&&i;s||o.data("jquery.menu-aim",s=new e(this,n)),"string"==typeof i&&s[i]()})}}(jQuery);