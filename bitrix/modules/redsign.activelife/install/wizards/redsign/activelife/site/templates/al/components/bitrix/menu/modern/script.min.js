!function(t,e,i,s){"use strict";function n(e,i){this.$element=t(e),this.options=t.extend(h,i),this.getSelectors(),this.getElements(),this.init()}function o(t){var e=0,i=t[e].height;return t.forEach(function(t,s){i>t.height&&(i=t.height,e=s)}),e}var r="SlineMenu",h={cssPrefix:".js-mm__",columns:3,productColumnWidth:270,transfromWidth:768};t.extend(n.prototype,{init:function(){this.hideNotFitElements(),this.listenEvents(),this.getWindowWidth()>=this.options.transfromWidth&&(this.grid(),this.alignSubmenu()),this.setReady()},resize:function(){this.setUnready(),this.getWindowWidth()>=this.options.transfromWidth?(this.hideNotFitElements(),this.breakGrid(),this.grid(),this.alignSubmenu()):this.breakGrid(),this.setReady()},alignSubmenu:function(){var e=this.$rootItems,i=this.$itemsContainer.parent().outerWidth();e.children(this.selectors.submenu).removeAttr("style").each(t.proxy(function(e,s){t(s).position().left+t(s).outerWidth()>i&&t(s).css("right",0)},this))},hideNotFitElements:function(){var e=this.$rootItems,i=this.$element.find(this.selectors.moreContainer),s=this.$itemsContainer.width(),n=this.$element.find(this.selectors.moreBtn).outerWidth()-15,o=0;e.removeClass("is-desktop-hide").each(function(e,i){var r=t(i);return n+r.outerWidth()<=s?void(n+=r.outerWidth()):(o=e-1,!1)}),o>0?(e.filter(":gt("+o+")").addClass("is-desktop-hide"),i.html(e.filter(":gt("+o+")").children("a").clone()),this.showMoreBtn()):this.hideMoreBtn()},getWindowWidth:function(){return e.innerWidth||i.documentElement.clientWidth||0},hideMoreBtn:function(){this.$element.find(this.selectors.moreBtn).css("visibility","hidden")},showMoreBtn:function(){this.$element.find(this.selectors.moreBtn).css("visibility","visible")},setReady:function(){this.$element.addClass("is-ready")},setUnready:function(){this.$element.removeClass("is-ready")},toggleMenu:function(){this.$itemsContainer.toggleClass("is-open")},toggleSubmenu:function(e){t(e).parent().toggleClass("is-sub-open")},grid:function(){var e=this.$rootItems;e.children(this.selectors.submenu).each(t.proxy(this.gridSubMenu,this))},gridSubMenu:function(e,i){var s=t(i).children(this.selectors.item),n=this.createColumns();if(s.each(t.proxy(function(e,i){var s=o(n),r=t(i),h=r.outerHeight(),c=r.outerWidth();n[s].height+=h,n[s].width=n[s].width<c?c:n[s].width,n[s].$el.append(t(i))},this)),t(i).children(this.selectors.product).length>0){var r=n[n.length]=this.createColumn(),h=t(i).children(this.selectors.product);r.width=h.outerWidth(),r.$el.append(h)}t(i).html(n.map(function(t){return t.$el.css({width:t.width})}))},createColumns:function(t){var e,i=[];for(t=t||this.getOption("columns"),e=0;e<t;e++)i[e]=this.createColumn();return i},createColumn:function(){return{height:0,width:0,$el:t("<div>").addClass(this.selectors.column.slice(1,this.selectors.column.length)).css({display:"inline-block","vertical-align":"top"})}},breakGrid:function(){var e=this.$rootItems;this.$element.find(this.selectors.column).children().unwrap(),e.children(this.selectors.submenu).each(t.proxy(function(e,i){var s=t(i);s.children(this.selectors.item).sort(function(e,i){return t(e).data("index")>=t(i).data("index")?1:-1}).appendTo(s)},this))},getSelectors:function(){this.selectors={},this.selectors.itemsContainer=this.options.cssPrefix+"items",this.selectors.rootItems=this.options.cssPrefix+"root-item",this.selectors.item=this.options.cssPrefix+"item",this.selectors.moreBtn=this.options.cssPrefix+"more-btn",this.selectors.moreContainer=this.options.cssPrefix+"more-container",this.selectors.toggleButton=this.options.cssPrefix+"toggle-button",this.selectors.toggleSubmenu=this.options.cssPrefix+"toggle-submenu",this.selectors.submenu=this.options.cssPrefix+"subitems",this.selectors.column=this.options.cssPrefix+"column",this.selectors.product=this.options.cssPrefix+"product"},getElements:function(){this.$rootItems=this.$element.find(this.selectors.rootItems),this.$itemsContainer=this.$element.find(this.selectors.itemsContainer)},listenEvents:function(){var i=this;t(e).on("resize",this.debounce(this.resize,100,this)),this.$element.find(this.selectors.toggleButton).on("click",t.proxy(this.toggleMenu,this)),this.$element.find(this.selectors.toggleSubmenu).on("click",function(){i.toggleSubmenu(this)})},getOption:function(t){var e,i=this.options[t],s=this.getWindowWidth();for(e in this.options.responsive)e<=s&&this.options.responsive[e][t]&&(i=this.options.responsive[e][t]);return i},debounce:function(t,e,i){var s;return function(){var n=arguments;i=i||this,clearTimeout(s),s=setTimeout(function(){t.apply(i,n)},e)}}}),t.fn[r]=function(e){return this.each(function(){t.data(this,r)||t.data(this,r,new n(this,e))})}}(jQuery,window,document),$(document).ready(function(){$(".js-modern-menu").SlineMenu({cssPrefix:".js-mm__",columns:3,productColumnWidth:270,transfromWidth:768})});